{{ if .Values.useAutoScaler }}
---
{{with merge (dict "name" "ui" "maxReplicas" .Values.APIInstancesMax "minReplicas" .Values.APIInstances "targetUsage" .Values.APITargetUsage) . }}
  {{template "assemblyline.HPA" .}}
{{end}}
---
{{with merge (dict "name" "internal-ui" "maxReplicas" .Values.internalAPIInstancesMax "minReplicas" .Values.internalAPIInstances "targetUsage" .Values.internalAPITargetUsage) . }}
  {{template "assemblyline.HPA" .}}
{{end}}
{{ if .Values.separateIngestAPI }}
---
{{with merge (dict "name" "ui-ingest" "maxReplicas" .Values.ingestAPIInstancesMax "minReplicas" .Values.ingestAPIInstances "targetUsage" .Values.ingestAPITargetUsage) . }}
  {{template "assemblyline.HPA" .}}
{{end}}
{{end}}
---
{{with merge (dict "name" "ingester" "maxReplicas" .Values.ingesterInstancesMax "minReplicas" .Values.ingesterInstances "targetUsage" .Values.ingesterTargetUsage) . }}
  {{template "assemblyline.HPA" .}}
{{end}}
---
{{with merge (dict "name" "dispatcher" "maxReplicas" .Values.dispatcherInstancesMax "minReplicas" .Values.dispatcherInstances "targetUsage" .Values.dispatcherTargetUsage) . }}
  {{template "assemblyline.HPA" .}}
{{end}}
---
{{with merge (dict "name" "service-server" "maxReplicas" .Values.serviceServerInstancesMax "minReplicas" .Values.serviceServerInstances "targetUsage" .Values.serviceServerTargetUsage) . }}
  {{template "assemblyline.HPA" .}}
{{end}}
{{end}}